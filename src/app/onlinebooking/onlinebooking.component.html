<h2 class="mainheading" style="text-align:center;">My Online Booking</h2>

<div style="text-align: center;">
  <img src="http://localhost/MNC-PHP-API/{{offerslist[0].shop_logo}}" style="width: 50px;margin-top: -7px;"><b class="subheading"> {{offerslist[0].name}}</b>
  </div>

<div style=" margin-top: -75px;">

  <form [formGroup]="onlinebooking" class="form-container" >
      <mat-card style="border: 1px solid #aeaeae;">
  
        <mat-card-header>
          <mat-card-title>
            <!-- <h4 class="subheading" style="color:skyblue;margin-left: -17px;">Enter Your Details_____</h4> -->
            <h2 class="mainheading" style=" margin-top: -17px;margin-left: -17px;">  Booking Details</h2>
            </mat-card-title>
        </mat-card-header>
        
        
        <div class="row" style="border: 1px solid #aeaeae;padding-top: 10px;padding-bottom: 10px;width: 1407px;margin-left: -1px;">
          <table>
            
            <tr>
              <td>
                <label>Booking Date</label> <br>
                <input class="datecls" type="date" style="border: 1px solid;height: 34px;width: 110px;" matinput="" formControlName="bookingdate" placeholder="Date From" [(ngModel)]="current_date">
                
              </td>
              <td>
                <label>Registration Number</label> <br>
                <select   class="carmodelcls" formControlName="vehicle_number"  style="border: 1px solid;height: 34px;" (change)="vehicleBasedModel($event)">   
                     
                  <option value="">--Select--</option>  
                  <option *ngFor="let carmodels of carDetailsById1" [value]="carmodels.vehicle_number">
                    {{carmodels.vehicle_number}}
                    </option> 
                   </select>

                   <div *ngIf="onlinebooking.controls['vehicle_number'].touched && onlinebooking.controls['vehicle_number'].invalid"> 
                      
                    <div *ngIf="onlinebooking.controls['vehicle_number'].errors" style="color: red;"> 
                      <div *ngIf="onlinebooking.controls['vehicle_number'].errors.required" style="font-size: 12px;">
                          Select Registration Number
                      </div> 		   
                     
                   </div> 
                    
                  </div> 
              </td>
              <td>
                <label>Special Instructions</label> <br>
                  <textarea class="textcls" formControlName="instructions" style="border: 1px solid;height: 34px;" matinput="" placeholder=""></textarea>

                  <div *ngIf="onlinebooking.controls['bookingdate'].touched && onlinebooking.controls['bookingdate'].invalid "> 
                    <div *ngIf="onlinebooking.controls['bookingdate'].errors" style="color: red;"> 
                     <div *ngIf="onlinebooking.controls['bookingdate'].errors.required" style="margin-left: 0px;font-size: 12px;">
                         Select Date
                     </div> 		   
                   </div> 
                 </div>
              </td>
              <td>
                <div  *ngIf="getPickupAvlData2 == 1">
                  <label >Do you need pick-up and drop?</label> 
<br>
                 
                  <label>No</label> &nbsp;
                  <label class="switch" >
                    <input  type="checkbox" formControlName="pickup_drop" value="Yes">
                    <span class="slider round"></span>
                  </label> &nbsp;
                  <label>Yes</label>

                  
                  
                  </div>
              </td>
              <td>
                <div *ngIf="getPickupAvlData2 == 1">
                <label >Pick-up Date</label> 
    <br>
                     
    <input class="datecls" type="date" style="border: 1px solid;height: 34px;width: 110px;" matinput="" formControlName="pickup_date" id="pickup_dateid" placeholder="Date From" >
</div>
              </td>
              <td>
                <div *ngIf="getPickupAvlData2 == 1">
                <label >Pick-up time</label> 
    <br>
                     
                      <select  style="height: 34px;" formControlName="pickup_time" class="fromdata" >
                        <option value="">--Select---</option>
                        <option value="9">9 AM</option>
                        <option value="9.30">9.30 AM</option>
                        <option value="10">10 AM</option>
                        <option value="10.30">10.30 AM</option>
                        </select>
                      </div>
              </td>

              <td>
                <div *ngIf="getPickupAvlData2 == 1">
                <label >Drop Date</label> 
    <br>
                     
    <input class="datecls" type="date" style="border: 1px solid;height: 34px;width: 110px;" matinput="" formControlName="drop_date" placeholder="Date From" >
              </div>
              </td>
              <td>
                <div *ngIf="getPickupAvlData2 == 1">
                <label >Drop time</label> 
    <br>
                     
                      <select formControlName="drop_time" style="height: 34px;"  class="fromdata" >
                        <option value="">--Select---</option>
                        <option value="9">9 AM</option>
                        <option value="9.30">9.30 AM</option>
                        <option value="10">10 AM</option>
                        <option value="10.30">10.30 AM</option>
                        </select>
                        </div>
              </td>
            </tr>
          </table>
          <!-- <div class="col-sm-2">
            <div class="form-group">
              <label>Booking Date</label> <br>
                <input class="datecls" type="date" style="border: 1px solid;height: 34px;width: 110px;" matinput="" formControlName="bookingdate" placeholder="Date From" [(ngModel)]="current_date">
                <div *ngIf="onlinebooking.controls['bookingdate'].touched && onlinebooking.controls['bookingdate'].invalid "> 
                  <div *ngIf="onlinebooking.controls['bookingdate'].errors" style="color: red;"> 
                   <div *ngIf="onlinebooking.controls['bookingdate'].errors.required" style="margin-left: 0px;font-size: 12px;">
                       Select Date
                   </div> 		   
                 </div> 
               </div>
                 </div>
              </div> -->

          <!-- <div class="col-sm-2">
            <div class="form-group">

              <label>Registration Number</label> <br>
                   
              <select   class="carmodelcls" formControlName="vehicle_number"  style="border: 1px solid;height: 34px;" (change)="vehicleBasedModel($event)">   
                     
                <option value="">--Select--</option>  
                <option *ngFor="let carmodels of carDetailsById1" [value]="carmodels.vehicle_number">
                  {{carmodels.vehicle_number}}
                  </option> 
                 </select>
                  <div *ngIf="onlinebooking.controls['vehicle_number'].touched && onlinebooking.controls['vehicle_number'].invalid"> 
                      
                  <div *ngIf="onlinebooking.controls['vehicle_number'].errors" style="color: red;"> 
                    <div *ngIf="onlinebooking.controls['vehicle_number'].errors.required" style="font-size: 12px;">
                        Select car model
                    </div> 		   
                   
                 </div> 
                  
                </div> 
                   </div>
          </div> -->
          
          <!-- <div class="col-sm-3">
           
            <div class="form-group">

              <label>Model</label> <br>
                   
              <select   class="carmodelcls" formControlName="model_id"  style="border: 1px solid;height: 34px;">   
                     
                <option selected *ngFor="let carmodels of carinfoModels1" [value]="carmodels.model">
                  {{carmodels.model_name}}
                  </option> 
                 </select>
                  <div *ngIf="onlinebooking.controls['model_id'].touched && onlinebooking.controls['model_id'].invalid"> 
                      
                  <div *ngIf="onlinebooking.controls['model_id'].errors" style="color: red;"> 
                    <div *ngIf="onlinebooking.controls['model_id'].errors.required" style="font-size: 12px;">
                        Select car model
                    </div> 		   
                   
                 </div> 
                  
                </div> 
                   </div>
                 
            </div> -->
    
            

              <!-- <div class="col-sm-3">
                <div class="form-group">
                  <label>Special Instructions</label> <br>
                  <textarea class="textcls" formControlName="instructions" style="border: 1px solid;height: 34px;" matinput="" placeholder=""></textarea>

                  <div *ngIf="onlinebooking.controls['bookingdate'].touched && onlinebooking.controls['bookingdate'].invalid "> 
                    <div *ngIf="onlinebooking.controls['bookingdate'].errors" style="color: red;"> 
                     <div *ngIf="onlinebooking.controls['bookingdate'].errors.required" style="margin-left: 0px;font-size: 12px;">
                         Select Date
                     </div> 		   
                   </div> 
                 </div>
              </div>
              </div> -->
              
              <!-- <div class="col-sm-3">
                <br>
                <div class="form-group" *ngIf="getPickupAvlData2 == 1">
                  <label style="width:185px;">Do you want pick-up and drop?</label> 

                 
                  <label>No</label> &nbsp;
                  <label class="switch" >
                    <input  type="checkbox" formControlName="pickup_drop" value="Yes">
                    <span class="slider round"></span>
                  </label> &nbsp;
                  <label>Yes</label>

                  
                  
                  </div>
                  </div> -->


                  


                      
     </div>
    <br>
    <div class="accordion1">
     <!---End of Booking details-->

       <!--End of booking details-->
     <!-- <mat-card-header> 
       <mat-card-title>  -->
        <!-- <h4 class="subheading" style="color:skyblue;margin-left: -17px;">Choose a Today Offers ______</h4> -->
        <!-- <h2 class="mainheading" style="margin-top: -17px;"> Deal Of The Day (offers)</h2> -->
        <h2 class="title1 subheading"  (click)="opened1 = !opened1">Deal Of The Day (offers) <i class="fa fa-chevron-down"></i> </h2> 
        <div class="content-container1" [class.opened1]="opened1">
    <div class="row">
      <!-- <div class="col-sm-12">
        <div class="container"> -->
        
        <ngx-slick-carousel class="carousel" style="width:100%;background: none;"
                        #slickModal="slick-carousel" 
                        [config]="slideConfig1" 
                        (init)="slickInit1($event)"
                        (breakpoint)="breakpoint1($event)"
                        (afterChange)="afterChange1($event)"
                        (beforeChange)="beforeChange1($event)">
        <div ngxSlickItem *ngFor="let s of offerslist" class="slide1" style="width: 200px !important;">
          <div class=" card" >
            <!-- <div class="image-container oneimage" style="border:1px solid;background-image: url('http://localhost/MNC-PHP-API/{{s.shop_image}}')" > -->
                 <div class="first">
                    <div class="d-flex justify-content-between align-items-center"> 
                      <span style="margin-left:0px;margin-top: 0px;"*ngIf="s.offer_percent != 0" class="discount">Up to {{s.offer_percent}}% Off</span> 
                      <span *ngIf="s.offer_percent == 0" class="discount"></span>

                      <!-- <span  class="discount2"> {{s.offer_name}} </span> -->
                      
                      <ng-template  #other_content1></ng-template>

                      <!-- <span  *ngIf = "date >= s.leave_from_date && date <= s.leave_to_date;else other_content1" class="openClosed">Closed</span> -->
                      
                      <!-- <span class="wishlist"><i class="fa fa-heart-o"></i></span>  -->
                    </div>
                </div> 

            <!-- </div> -->

            

            <div class="product-detail-container p-2">

              <div class="d-flex justify-content-between align-items-center pt-1">
                <!-- <div class="color-select d-flex "> 
                  <img src="http://localhost/MNC-PHP-API/{{s.shop_logo}}" style="width: 50px;margin-top: -7px;"> {{s.name}}
                  </div> -->
             </div>

            

              <span ><i class="fa fa-car" style="color: #429c68;"></i>&nbsp; <b>{{s.offer_name}}</b></span> 
<br>
                <b>Services:</b>
                 <div style="height: 50px;overflow: auto;">
                 <div *ngFor="let m of  s.services.split(',');let j=index" >
                  <div *ngFor="let m1 of  MasterServiceid1;" >
                 <span *ngIf="m === m1.service_id"><i class="fa fa-check-circle" style="color: #429c68;"></i>&nbsp; {{m1.service_name}}</span>
                 </div>
                 </div>
                 </div>
          

                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="dress-name">{{s.model_name}}</h5>
                 </div>

                <div class="d-flex justify-content-between align-items-center" style="height:20px">
                  <h5 *ngIf="s.offer_percent != 0"  class="dress-name">Offer Price &nbsp; <i class="fa fa-rupee"></i> &nbsp;
                    <input type="text" readonly id="offerprice_{{s.offer_id}}" class="combovaluebox" value="{{s.combo_price}}">  /-</h5>
                  <h5 *ngIf="s.offer_percent == 0" class="dress-name">Price <i class="fa fa-rupee"></i>
                    <input type="text" readonly id="offerprice_{{s.offer_id}}" class="combovaluebox" value="{{s.original_amount}}">  /-</h5>
                 </div>
                 
                 <div class="d-flex justify-content-between align-items-center">
                  <span *ngIf="s.offer_percent != 0"><b>Save Upto </b> <i class="fa fa-rupee"></i> {{s.original_amount - s.combo_price }}</span>
                </div>
                
              <!-- <div class="d-flex justify-content-between align-items-center pt-1">
                <span *ngIf="s.offer_percent != 0" class="buy">Save Upto <i class="fa fa-rupee"></i> {{s.original_amount - s.combo_price }} +</span>
              </div> -->

              <!-- <a  style="text-decoration: none;cursor: pointer;" class="booknowntn"  >Book Now</a> -->


           <button id="select_{{s.offer_id}}" (click)="changeBgColor(s.offer_id);getComboOfferDetails(s.offer_id,s.combo_price,s.offer_name)"   class="comboselectbtm" >{{text}}</button>    </div>
        </div>
        </div>
</ngx-slick-carousel>

<br><br><br>
<div style="font-size: 17px;margin-top: 15px;text-align: right;margin-left: -31px;">
  <input type="hidden" formControlName="combo_id" id="ComboPrimaryIdArr" class="selectnow2"  >
  <label class="mainheading" id="name" >Combo Offer price </label> &nbsp; <i style="margin-right: -13px;" class="fa fa-rupee"></i> 
  <input type="number" readonly id="finalamount" formControlName="comboprice_total" class="selectnow2"  >
  <br>
  <!-- <div > -->
    <p style="text-align: right" id="offernameShow"></p>
  <!-- </div> -->
  
  <!-- </div>
</div> -->
</div>
</div>
</div>
</div>    
        <!-- </mat-card-title> 
     </mat-card-header>  -->
    

      <!---End of Pricing plan-->
<br>

<div class="accordion">
  <h2 class="title subheading"  (click)="opened = !opened">Add Extra Services <i class="fa fa-chevron-down"></i> </h2> 
  <div class="content-container" [class.opened]="opened">
    <div class="row"> 
      <div class="col-sm-6" style="display: inline;" *ngFor="let shoplist of shopdetails1;">
    
        <div class="extser">
  
          <div class="d-flex justify-content-between align-items-center">
             <span class="discount2" *ngIf="shoplist.offer_percent!=0">Up to {{shoplist. offer_percent}}% Off {{shoplist.is_pickup_drop_avl}}</span>  
        </div>
          <!--Section: Content-->
            <div class="text-center white-text d-md-flex justify-content-between p6 indigo lighten-2"  >
              <div class="servicename">
               <p class="font-weight-bold;back" >
                {{shoplist.service_name}}</p> 
               </div>
              <br>
              <div class="serviceprice">
              <p *ngIf="shoplist.offer_percent!=0" > Offer Price @ 
                <input readonly type="text" class="selectnow3" value="{{shoplist.offer_price}}" id="amount_{{shoplist.service_id}}">
              </p> 
              
              <p *ngIf="shoplist.offer_percent ==0" > Service Price @ 
                <!-- &nbsp; <span><i style="margin-right: -13px;" class="fa fa-rupee"></i></span> -->
                <input readonly type="text" class="selectnow3" value="{{shoplist.actual_amount}}" id="amount_{{shoplist.service_id}}">
              </p>
            </div>

              <button id="chooice_{{shoplist.service_id}}" class="selectnow" (click)="selectbuttoncolor(shoplist.service_id)">{{textcontent}}</button> 
              
            </div> 
   
        
      </div>
      <br>
  </div>
</div>
  
</div>
</div>

      <!-- <mat-card-header> 
         <mat-card-title> 
          <h2 class="mainheading" style="margin-top: -17px;margin-left: -17px;">Add Extra  Services</h2>
          </mat-card-title> 
       </mat-card-header>  -->
      <mat-card-content >
    
       
      
    </mat-card-content>

    <div style="font-size: 17px;text-align: right;margin-right: 28px;">
      <label class="mainheading">Extra Services price: </label> &nbsp; <i style="margin-right: -13px;" class="fa fa-rupee"></i>
      <input readonly type="number" id="totalamount" formControlName="serviceprice_total" class="selectnow2"  >

<br><br>
<input type="hidden" formControlName="services"  class="selectnow2"  >     
<label class="mainheading">Net Amount Payable: </label> &nbsp; <i style="margin-right: -13px;" class="fa fa-rupee"></i>
      <input readonly type="number" formControlName="payable_amt" id="final_totalamount" class="selectnow2"  >
      <br><br>

      <label class="mainheading">Payment Type: </label> &nbsp; 
      <input readonly type="text" formControlName="payment_type" value="Cash"  class="selectnow2"  >
      <br> <br>

      <button class="allSubmitbtn btn" mat-raised-button="" style="margin-left: 975px;" [disabled]='!onlinebooking.valid' (click)="OnlineBooking(onlinebooking.value)">Confirm Booking</button>
      </div>

     <mat-card-actions style="text-align: right;"> 
     
     <!-- <label>Totally:</label> -->
   
     <!-- <input type="number" id="finalamount" class="selectnow2"  > -->
     </mat-card-actions>
       
   </mat-card>
    </form>
    </div> 
    <script>
    function slideShowController($scope, $timeout) {
      var slidesInSlideshow = 4;
      var slidesTimeIntervalInMs = 3000; 
     
      $scope.slideshow = 1;
      var slideTimer =
      $timeout(function interval() {
          $scope.slideshow = ($scope.slideshow % slidesInSlideshow) + 1;
          slideTimer = $timeout(interval, slidesTimeIntervalInMs);
          }, slidesTimeIntervalInMs);
        }
          </script>