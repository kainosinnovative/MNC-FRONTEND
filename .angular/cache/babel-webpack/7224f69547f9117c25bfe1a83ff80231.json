{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/button\";\nexport class FileuploadComponent {\n  constructor(http) {\n    this.http = http;\n    this.title = 'Angular File Upload Example with PHP';\n    this.file = new FormControl('');\n    this.file_data = '';\n    this.ip = \"http://127.0.0.1/async/\";\n  }\n\n  fileChange(event) {\n    const fileList = event.target.files; //check whether file is selected or not\n\n    if (fileList.length > 0) {\n      const file = fileList[0]; //get file information such as name, size and type\n\n      console.log('finfo', file.name, file.size, file.type); //max file size is 4 mb\n\n      if (file.size / 1048576 <= 4) {\n        let formData = new FormData();\n        let info = {\n          id: 2,\n          name: 'raja'\n        };\n        formData.append('file', file, file.name);\n        formData.append('id', '2');\n        formData.append('tz', new Date().toISOString());\n        formData.append('update', '2');\n        formData.append('info', JSON.stringify(info));\n        this.file_data = formData;\n      } else {//this.snackBar.open('File size exceeds 4 MB. Please choose less than 4 MB','',{duration: 2000});\n      }\n    }\n  }\n\n  uploadFile() {\n    console.log(this.file_data); // alert(this.file_data)\n\n    this.http.post('http://localhost/upload-file.php', this.file_data).subscribe(res => {//send success response\n    }, err => {//send error response\n    });\n  }\n\n}\n\nFileuploadComponent.ɵfac = function FileuploadComponent_Factory(t) {\n  return new (t || FileuploadComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n\nFileuploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FileuploadComponent,\n  selectors: [[\"fileupload-component\"]],\n  decls: 4,\n  vars: 1,\n  consts: [[\"type\", \"file\", \"placeholder\", \"File\", 3, \"formControl\", \"change\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"margin-top\", \"20px\", 3, \"click\"]],\n  template: function FileuploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"input\", 0);\n      i0.ɵɵlistener(\"change\", function FileuploadComponent_Template_input_change_0_listener($event) {\n        return ctx.fileChange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(1, \"br\");\n      i0.ɵɵelementStart(2, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function FileuploadComponent_Template_button_click_2_listener() {\n        return ctx.uploadFile();\n      });\n      i0.ɵɵtext(3, \" Upload\\n\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formControl\", ctx.file);\n    }\n  },\n  directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i3.MatButton],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmaWxldXBsb2FkLmNvbXBvbmVudC5zY3NzIn0= */\"]\n});","map":{"version":3,"sources":["G:/feb8_2022_morn_frontend/MNC-FRONTEND/src/app/fileupload/fileupload.component.ts"],"names":["FormControl","i0","i1","i2","i3","FileuploadComponent","constructor","http","title","file","file_data","ip","fileChange","event","fileList","target","files","length","console","log","name","size","type","formData","FormData","info","id","append","Date","toISOString","JSON","stringify","uploadFile","post","subscribe","res","err","ɵfac","FileuploadComponent_Factory","t","ɵɵdirectiveInject","HttpClient","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","FileuploadComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","FileuploadComponent_Template_input_change_0_listener","$event","ɵɵelementEnd","ɵɵelement","FileuploadComponent_Template_button_click_2_listener","ɵɵtext","ɵɵproperty","directives","DefaultValueAccessor","NgControlStatus","FormControlDirective","MatButton","styles"],"mappings":"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","sourcesContent":["import { FormControl } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"@angular/material/button\";\r\nexport class FileuploadComponent {\r\n    constructor(http) {\r\n        this.http = http;\r\n        this.title = 'Angular File Upload Example with PHP';\r\n        this.file = new FormControl('');\r\n        this.file_data = '';\r\n        this.ip = \"http://127.0.0.1/async/\";\r\n    }\r\n    fileChange(event) {\r\n        const fileList = event.target.files;\r\n        //check whether file is selected or not\r\n        if (fileList.length > 0) {\r\n            const file = fileList[0];\r\n            //get file information such as name, size and type\r\n            console.log('finfo', file.name, file.size, file.type);\r\n            //max file size is 4 mb\r\n            if ((file.size / 1048576) <= 4) {\r\n                let formData = new FormData();\r\n                let info = { id: 2, name: 'raja' };\r\n                formData.append('file', file, file.name);\r\n                formData.append('id', '2');\r\n                formData.append('tz', new Date().toISOString());\r\n                formData.append('update', '2');\r\n                formData.append('info', JSON.stringify(info));\r\n                this.file_data = formData;\r\n            }\r\n            else {\r\n                //this.snackBar.open('File size exceeds 4 MB. Please choose less than 4 MB','',{duration: 2000});\r\n            }\r\n        }\r\n    }\r\n    uploadFile() {\r\n        console.log(this.file_data);\r\n        // alert(this.file_data)\r\n        this.http.post('http://localhost/upload-file.php', this.file_data)\r\n            .subscribe(res => {\r\n            //send success response\r\n        }, (err) => {\r\n            //send error response\r\n        });\r\n    }\r\n}\r\nFileuploadComponent.ɵfac = function FileuploadComponent_Factory(t) { return new (t || FileuploadComponent)(i0.ɵɵdirectiveInject(i1.HttpClient)); };\r\nFileuploadComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: FileuploadComponent, selectors: [[\"fileupload-component\"]], decls: 4, vars: 1, consts: [[\"type\", \"file\", \"placeholder\", \"File\", 3, \"formControl\", \"change\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"margin-top\", \"20px\", 3, \"click\"]], template: function FileuploadComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"input\", 0);\r\n        i0.ɵɵlistener(\"change\", function FileuploadComponent_Template_input_change_0_listener($event) { return ctx.fileChange($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(1, \"br\");\r\n        i0.ɵɵelementStart(2, \"button\", 1);\r\n        i0.ɵɵlistener(\"click\", function FileuploadComponent_Template_button_click_2_listener() { return ctx.uploadFile(); });\r\n        i0.ɵɵtext(3, \" Upload\\n\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"formControl\", ctx.file);\r\n    } }, directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlDirective, i3.MatButton], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmaWxldXBsb2FkLmNvbXBvbmVudC5zY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}